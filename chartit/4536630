<!DOCTYPE html>
<html>
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# githubog: http://ogp.me/ns/fb/githubog#">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>validation.py Chartit</title>

  <meta content="authenticity_token" name="csrf-param" />
<meta content="3BTYjQajRrfwCV/0TsgSUnWoAHLLGCrI645gTT1N+/4=" name="csrf-token" />
  <meta name="viewport" content="width=960">


  <link type="text/plain" rel="author" href="https://github.com/humans.txt" />
  <meta content="gist" name="octolytics-app-id" /><meta content="collector.githubapp.com" name="octolytics-host" /><meta content="collector-cdn.github.com" name="octolytics-script-host" />

  <link href="/assets/application-f374177b3852f4196656de3e28171c68.css" media="screen, print" rel="stylesheet" />
  <script src="/assets/application-6bf938e1df1e84d0695ba1b553466caf.js"></script>

    <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@github">
  <meta property="og:title" content="rochacbruno/validation.py">
  <meta property="og:type" content="githubog:gist">
  <meta property="og:url" content="https://gist.github.com//rochacbruno/4536630">
  <meta property="og:image" content="https://0.gravatar.com/avatar/9200c133c210ad51e8005277e932061a?d=https%3A%2F%2Fidenticons.github.com%2F3db6e42258c0dc5d3238b223d74e4002.png&amp;s=140">
  <meta property="og:site_name" content="GitHub Gists">
  <meta property="og:description" content="validation.py Chartit - Gist is a simple way to share snippets of text and code with others.">
  <meta name="description" content="validation.py Chartit - Gist is a simple way to share snippets of text and code with others.">

</head>

<body class=" ">

  <div id="wrapper">
    

    <div id="header" class="header header-logged-out">
      <div class="container" class="clearfix">
        <a class="header-logo-wordmark" href="https://gist.github.com/">
          <span class="octicon octicon-logo-github"></span>
          <span class="octicon-logo octicon-logo-gist"></span>
        </a>

        <div class="header-actions">
          <a class="button primary" href="https://github.com/signup?return_to=gist">Sign up for a GitHub Account</a>
          <a class="button" href="https://gist.github.com/login?return_to=/rochacbruno/4536630" data-skip-pjax>Sign in</a>
        </div>
      </div>
    </div>

    <div class="site-content" id="js-pjax-container" data-pjax-container>
      <div class=" site-container js-site-container" data-url="/rochacbruno/4536630">
  
  <meta content="true" name="octolytics-dimension-public" /><meta content="4536630" name="octolytics-dimension-gist_id" /><meta content="4536630" name="octolytics-dimension-gist_name" /><meta content="false" name="octolytics-dimension-anonymous" /><meta content="458654" name="octolytics-dimension-owner_id" /><meta content="rochacbruno" name="octolytics-dimension-owner_login" /><meta content="false" name="octolytics-dimension-forked" />

<div class="pagehead repohead">
  <div class="container">
    <div class="title-actions-bar">
      <ul class="pagehead-actions">


      </ul>
      <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
        <span class="repo-label"><span>public</span></span>
        <span class="mega-octicon octicon-gist" ></span>
        <div class="meta">
          <div class="gist-author">
            <img src="https://0.gravatar.com/avatar/9200c133c210ad51e8005277e932061a?d=https%3A%2F%2Fidenticons.github.com%2F3db6e42258c0dc5d3238b223d74e4002.png&s=140" width="26" height="26">
            <span class="author vcard">
                <span itemprop="title"><a href="/rochacbruno">rochacbruno</a></span>
            </span> /
            <strong><a href="/rochacbruno/4536630" class="js-current-repository">validation.py</a></strong>
          </div>
          <div class="gist-timestamp">
              <span class="datetime">Created <time class="js-relative-date" title="2013-01-15T06:22:23Z" datetime="2013-01-15T06:22:23Z">2013-01-15</time></span>
          </div>
      </h1>
    </div>

  </div>
</div>



<div class="gist-description container">
  <p>validation.py Chartit</p>
</div>

<div class="gist container js-gist-container" data-version="7719cb4e2efa4270875cdc3d2daaa0fef612db76">
    <div class="root-pane">
  <div class="menu-container">
    <ul class="menu gisttabs">
      <li>
        <a href="/rochacbruno/4536630" class="selected">
          Gist Detail
        </a>
      </li>

        <li class="revision-count">
          <a href="/rochacbruno/4536630/revisions" >
            Revisions
            <span class="counter">1</span>
          </a>
        </li>


    </ul>
  </div>

  <ul class="export-references">
    <li>
      <a href="/rochacbruno/4536630/download" class="minibutton" data-skip-pjax="true" rel="nofollow"><span class="octicon octicon-cloud-download"></span>Download Gist</a>
    </li>
    <li>
      <label for="url-field"><strong>Clone</strong> this gist</label>
      <input type="text" readonly spellcheck="false" class="url-field js-url-field js-cptoggle" name="url-field" value="https://gist.github.com/4536630.git" data-cptoggle-display="/rochacbruno/4536630">
    </li>
    <li>
      <label for="embed-field"><strong>Embed</strong> this gist</label>
      <input type="text" readonly spellcheck="false" class="url-field js-url-field" name="embed-field" value="&lt;script src=&quot;https://gist.github.com/rochacbruno/4536630.js&quot;&gt;&lt;/script&gt;">
    </li>
    <li>
      <label for="link-field"><strong>Link to</strong> this gist</label>
      <input type="text" readonly spellcheck="false" class="url-field js-url-field" name="link-field" value="https://gist.github.com/rochacbruno/4536630">
    </li>
  </ul>
</div>


  <div class="column files">
        <div id="file-validation-py" class="bubble">
          <div class="file-box ">
            <div class="meta">
              <div class="file-info">
                <span class="file-type-icon"><span class="octicon octicon-gist"></span></span>
                <strong class="file-name js-selectable-text">validation.py</strong>
              </div>
              <div class="file-actions">
                <span class="file-language">Python</span>
                <ul class="button-group">
                  <li><a title="Permalink" href="#file-validation-py" class="file-actions-button tooltipped downwards permalink"><span class="octicon octicon-link"></span></a></li>
                  <li><a title="View Raw" href="/rochacbruno/4536630/raw/89e1f1cc7e8cadc8044fac8fb61a2c68cbd9ce10/validation.py" data-skip-pjax class="file-actions-button tooltipped downwards raw-url"><span class="octicon octicon-code"></span></a></li>
                </ul>
              </div>
            </div>
            <div class="suppressed">
              <a class="js-show-suppressed-file">File suppressed. Click to show.</a>
            </div>
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tr>
          <td class="line-numbers">
            <span class="line-number" id="file-validation-py-L1" rel="file-validation-py-L1">1</span>
            <span class="line-number" id="file-validation-py-L2" rel="file-validation-py-L2">2</span>
            <span class="line-number" id="file-validation-py-L3" rel="file-validation-py-L3">3</span>
            <span class="line-number" id="file-validation-py-L4" rel="file-validation-py-L4">4</span>
            <span class="line-number" id="file-validation-py-L5" rel="file-validation-py-L5">5</span>
            <span class="line-number" id="file-validation-py-L6" rel="file-validation-py-L6">6</span>
            <span class="line-number" id="file-validation-py-L7" rel="file-validation-py-L7">7</span>
            <span class="line-number" id="file-validation-py-L8" rel="file-validation-py-L8">8</span>
            <span class="line-number" id="file-validation-py-L9" rel="file-validation-py-L9">9</span>
            <span class="line-number" id="file-validation-py-L10" rel="file-validation-py-L10">10</span>
            <span class="line-number" id="file-validation-py-L11" rel="file-validation-py-L11">11</span>
            <span class="line-number" id="file-validation-py-L12" rel="file-validation-py-L12">12</span>
            <span class="line-number" id="file-validation-py-L13" rel="file-validation-py-L13">13</span>
            <span class="line-number" id="file-validation-py-L14" rel="file-validation-py-L14">14</span>
            <span class="line-number" id="file-validation-py-L15" rel="file-validation-py-L15">15</span>
            <span class="line-number" id="file-validation-py-L16" rel="file-validation-py-L16">16</span>
            <span class="line-number" id="file-validation-py-L17" rel="file-validation-py-L17">17</span>
            <span class="line-number" id="file-validation-py-L18" rel="file-validation-py-L18">18</span>
            <span class="line-number" id="file-validation-py-L19" rel="file-validation-py-L19">19</span>
            <span class="line-number" id="file-validation-py-L20" rel="file-validation-py-L20">20</span>
            <span class="line-number" id="file-validation-py-L21" rel="file-validation-py-L21">21</span>
            <span class="line-number" id="file-validation-py-L22" rel="file-validation-py-L22">22</span>
            <span class="line-number" id="file-validation-py-L23" rel="file-validation-py-L23">23</span>
            <span class="line-number" id="file-validation-py-L24" rel="file-validation-py-L24">24</span>
            <span class="line-number" id="file-validation-py-L25" rel="file-validation-py-L25">25</span>
            <span class="line-number" id="file-validation-py-L26" rel="file-validation-py-L26">26</span>
            <span class="line-number" id="file-validation-py-L27" rel="file-validation-py-L27">27</span>
            <span class="line-number" id="file-validation-py-L28" rel="file-validation-py-L28">28</span>
            <span class="line-number" id="file-validation-py-L29" rel="file-validation-py-L29">29</span>
            <span class="line-number" id="file-validation-py-L30" rel="file-validation-py-L30">30</span>
            <span class="line-number" id="file-validation-py-L31" rel="file-validation-py-L31">31</span>
            <span class="line-number" id="file-validation-py-L32" rel="file-validation-py-L32">32</span>
            <span class="line-number" id="file-validation-py-L33" rel="file-validation-py-L33">33</span>
            <span class="line-number" id="file-validation-py-L34" rel="file-validation-py-L34">34</span>
            <span class="line-number" id="file-validation-py-L35" rel="file-validation-py-L35">35</span>
            <span class="line-number" id="file-validation-py-L36" rel="file-validation-py-L36">36</span>
            <span class="line-number" id="file-validation-py-L37" rel="file-validation-py-L37">37</span>
            <span class="line-number" id="file-validation-py-L38" rel="file-validation-py-L38">38</span>
            <span class="line-number" id="file-validation-py-L39" rel="file-validation-py-L39">39</span>
            <span class="line-number" id="file-validation-py-L40" rel="file-validation-py-L40">40</span>
            <span class="line-number" id="file-validation-py-L41" rel="file-validation-py-L41">41</span>
            <span class="line-number" id="file-validation-py-L42" rel="file-validation-py-L42">42</span>
            <span class="line-number" id="file-validation-py-L43" rel="file-validation-py-L43">43</span>
            <span class="line-number" id="file-validation-py-L44" rel="file-validation-py-L44">44</span>
            <span class="line-number" id="file-validation-py-L45" rel="file-validation-py-L45">45</span>
            <span class="line-number" id="file-validation-py-L46" rel="file-validation-py-L46">46</span>
            <span class="line-number" id="file-validation-py-L47" rel="file-validation-py-L47">47</span>
            <span class="line-number" id="file-validation-py-L48" rel="file-validation-py-L48">48</span>
            <span class="line-number" id="file-validation-py-L49" rel="file-validation-py-L49">49</span>
            <span class="line-number" id="file-validation-py-L50" rel="file-validation-py-L50">50</span>
            <span class="line-number" id="file-validation-py-L51" rel="file-validation-py-L51">51</span>
            <span class="line-number" id="file-validation-py-L52" rel="file-validation-py-L52">52</span>
            <span class="line-number" id="file-validation-py-L53" rel="file-validation-py-L53">53</span>
            <span class="line-number" id="file-validation-py-L54" rel="file-validation-py-L54">54</span>
            <span class="line-number" id="file-validation-py-L55" rel="file-validation-py-L55">55</span>
            <span class="line-number" id="file-validation-py-L56" rel="file-validation-py-L56">56</span>
            <span class="line-number" id="file-validation-py-L57" rel="file-validation-py-L57">57</span>
            <span class="line-number" id="file-validation-py-L58" rel="file-validation-py-L58">58</span>
            <span class="line-number" id="file-validation-py-L59" rel="file-validation-py-L59">59</span>
            <span class="line-number" id="file-validation-py-L60" rel="file-validation-py-L60">60</span>
            <span class="line-number" id="file-validation-py-L61" rel="file-validation-py-L61">61</span>
            <span class="line-number" id="file-validation-py-L62" rel="file-validation-py-L62">62</span>
            <span class="line-number" id="file-validation-py-L63" rel="file-validation-py-L63">63</span>
            <span class="line-number" id="file-validation-py-L64" rel="file-validation-py-L64">64</span>
            <span class="line-number" id="file-validation-py-L65" rel="file-validation-py-L65">65</span>
            <span class="line-number" id="file-validation-py-L66" rel="file-validation-py-L66">66</span>
            <span class="line-number" id="file-validation-py-L67" rel="file-validation-py-L67">67</span>
            <span class="line-number" id="file-validation-py-L68" rel="file-validation-py-L68">68</span>
            <span class="line-number" id="file-validation-py-L69" rel="file-validation-py-L69">69</span>
            <span class="line-number" id="file-validation-py-L70" rel="file-validation-py-L70">70</span>
            <span class="line-number" id="file-validation-py-L71" rel="file-validation-py-L71">71</span>
            <span class="line-number" id="file-validation-py-L72" rel="file-validation-py-L72">72</span>
            <span class="line-number" id="file-validation-py-L73" rel="file-validation-py-L73">73</span>
            <span class="line-number" id="file-validation-py-L74" rel="file-validation-py-L74">74</span>
            <span class="line-number" id="file-validation-py-L75" rel="file-validation-py-L75">75</span>
            <span class="line-number" id="file-validation-py-L76" rel="file-validation-py-L76">76</span>
            <span class="line-number" id="file-validation-py-L77" rel="file-validation-py-L77">77</span>
            <span class="line-number" id="file-validation-py-L78" rel="file-validation-py-L78">78</span>
            <span class="line-number" id="file-validation-py-L79" rel="file-validation-py-L79">79</span>
            <span class="line-number" id="file-validation-py-L80" rel="file-validation-py-L80">80</span>
            <span class="line-number" id="file-validation-py-L81" rel="file-validation-py-L81">81</span>
            <span class="line-number" id="file-validation-py-L82" rel="file-validation-py-L82">82</span>
            <span class="line-number" id="file-validation-py-L83" rel="file-validation-py-L83">83</span>
            <span class="line-number" id="file-validation-py-L84" rel="file-validation-py-L84">84</span>
            <span class="line-number" id="file-validation-py-L85" rel="file-validation-py-L85">85</span>
            <span class="line-number" id="file-validation-py-L86" rel="file-validation-py-L86">86</span>
            <span class="line-number" id="file-validation-py-L87" rel="file-validation-py-L87">87</span>
            <span class="line-number" id="file-validation-py-L88" rel="file-validation-py-L88">88</span>
            <span class="line-number" id="file-validation-py-L89" rel="file-validation-py-L89">89</span>
            <span class="line-number" id="file-validation-py-L90" rel="file-validation-py-L90">90</span>
            <span class="line-number" id="file-validation-py-L91" rel="file-validation-py-L91">91</span>
            <span class="line-number" id="file-validation-py-L92" rel="file-validation-py-L92">92</span>
            <span class="line-number" id="file-validation-py-L93" rel="file-validation-py-L93">93</span>
            <span class="line-number" id="file-validation-py-L94" rel="file-validation-py-L94">94</span>
            <span class="line-number" id="file-validation-py-L95" rel="file-validation-py-L95">95</span>
            <span class="line-number" id="file-validation-py-L96" rel="file-validation-py-L96">96</span>
            <span class="line-number" id="file-validation-py-L97" rel="file-validation-py-L97">97</span>
            <span class="line-number" id="file-validation-py-L98" rel="file-validation-py-L98">98</span>
            <span class="line-number" id="file-validation-py-L99" rel="file-validation-py-L99">99</span>
            <span class="line-number" id="file-validation-py-L100" rel="file-validation-py-L100">100</span>
            <span class="line-number" id="file-validation-py-L101" rel="file-validation-py-L101">101</span>
            <span class="line-number" id="file-validation-py-L102" rel="file-validation-py-L102">102</span>
            <span class="line-number" id="file-validation-py-L103" rel="file-validation-py-L103">103</span>
            <span class="line-number" id="file-validation-py-L104" rel="file-validation-py-L104">104</span>
            <span class="line-number" id="file-validation-py-L105" rel="file-validation-py-L105">105</span>
            <span class="line-number" id="file-validation-py-L106" rel="file-validation-py-L106">106</span>
            <span class="line-number" id="file-validation-py-L107" rel="file-validation-py-L107">107</span>
            <span class="line-number" id="file-validation-py-L108" rel="file-validation-py-L108">108</span>
            <span class="line-number" id="file-validation-py-L109" rel="file-validation-py-L109">109</span>
            <span class="line-number" id="file-validation-py-L110" rel="file-validation-py-L110">110</span>
            <span class="line-number" id="file-validation-py-L111" rel="file-validation-py-L111">111</span>
            <span class="line-number" id="file-validation-py-L112" rel="file-validation-py-L112">112</span>
            <span class="line-number" id="file-validation-py-L113" rel="file-validation-py-L113">113</span>
            <span class="line-number" id="file-validation-py-L114" rel="file-validation-py-L114">114</span>
            <span class="line-number" id="file-validation-py-L115" rel="file-validation-py-L115">115</span>
            <span class="line-number" id="file-validation-py-L116" rel="file-validation-py-L116">116</span>
            <span class="line-number" id="file-validation-py-L117" rel="file-validation-py-L117">117</span>
            <span class="line-number" id="file-validation-py-L118" rel="file-validation-py-L118">118</span>
            <span class="line-number" id="file-validation-py-L119" rel="file-validation-py-L119">119</span>
            <span class="line-number" id="file-validation-py-L120" rel="file-validation-py-L120">120</span>
            <span class="line-number" id="file-validation-py-L121" rel="file-validation-py-L121">121</span>
            <span class="line-number" id="file-validation-py-L122" rel="file-validation-py-L122">122</span>
            <span class="line-number" id="file-validation-py-L123" rel="file-validation-py-L123">123</span>
            <span class="line-number" id="file-validation-py-L124" rel="file-validation-py-L124">124</span>
            <span class="line-number" id="file-validation-py-L125" rel="file-validation-py-L125">125</span>
            <span class="line-number" id="file-validation-py-L126" rel="file-validation-py-L126">126</span>
            <span class="line-number" id="file-validation-py-L127" rel="file-validation-py-L127">127</span>
            <span class="line-number" id="file-validation-py-L128" rel="file-validation-py-L128">128</span>
            <span class="line-number" id="file-validation-py-L129" rel="file-validation-py-L129">129</span>
            <span class="line-number" id="file-validation-py-L130" rel="file-validation-py-L130">130</span>
            <span class="line-number" id="file-validation-py-L131" rel="file-validation-py-L131">131</span>
            <span class="line-number" id="file-validation-py-L132" rel="file-validation-py-L132">132</span>
            <span class="line-number" id="file-validation-py-L133" rel="file-validation-py-L133">133</span>
            <span class="line-number" id="file-validation-py-L134" rel="file-validation-py-L134">134</span>
            <span class="line-number" id="file-validation-py-L135" rel="file-validation-py-L135">135</span>
            <span class="line-number" id="file-validation-py-L136" rel="file-validation-py-L136">136</span>
            <span class="line-number" id="file-validation-py-L137" rel="file-validation-py-L137">137</span>
            <span class="line-number" id="file-validation-py-L138" rel="file-validation-py-L138">138</span>
            <span class="line-number" id="file-validation-py-L139" rel="file-validation-py-L139">139</span>
            <span class="line-number" id="file-validation-py-L140" rel="file-validation-py-L140">140</span>
            <span class="line-number" id="file-validation-py-L141" rel="file-validation-py-L141">141</span>
            <span class="line-number" id="file-validation-py-L142" rel="file-validation-py-L142">142</span>
            <span class="line-number" id="file-validation-py-L143" rel="file-validation-py-L143">143</span>
            <span class="line-number" id="file-validation-py-L144" rel="file-validation-py-L144">144</span>
            <span class="line-number" id="file-validation-py-L145" rel="file-validation-py-L145">145</span>
            <span class="line-number" id="file-validation-py-L146" rel="file-validation-py-L146">146</span>
            <span class="line-number" id="file-validation-py-L147" rel="file-validation-py-L147">147</span>
            <span class="line-number" id="file-validation-py-L148" rel="file-validation-py-L148">148</span>
            <span class="line-number" id="file-validation-py-L149" rel="file-validation-py-L149">149</span>
            <span class="line-number" id="file-validation-py-L150" rel="file-validation-py-L150">150</span>
            <span class="line-number" id="file-validation-py-L151" rel="file-validation-py-L151">151</span>
            <span class="line-number" id="file-validation-py-L152" rel="file-validation-py-L152">152</span>
            <span class="line-number" id="file-validation-py-L153" rel="file-validation-py-L153">153</span>
            <span class="line-number" id="file-validation-py-L154" rel="file-validation-py-L154">154</span>
            <span class="line-number" id="file-validation-py-L155" rel="file-validation-py-L155">155</span>
            <span class="line-number" id="file-validation-py-L156" rel="file-validation-py-L156">156</span>
            <span class="line-number" id="file-validation-py-L157" rel="file-validation-py-L157">157</span>
            <span class="line-number" id="file-validation-py-L158" rel="file-validation-py-L158">158</span>
            <span class="line-number" id="file-validation-py-L159" rel="file-validation-py-L159">159</span>
            <span class="line-number" id="file-validation-py-L160" rel="file-validation-py-L160">160</span>
            <span class="line-number" id="file-validation-py-L161" rel="file-validation-py-L161">161</span>
            <span class="line-number" id="file-validation-py-L162" rel="file-validation-py-L162">162</span>
            <span class="line-number" id="file-validation-py-L163" rel="file-validation-py-L163">163</span>
            <span class="line-number" id="file-validation-py-L164" rel="file-validation-py-L164">164</span>
            <span class="line-number" id="file-validation-py-L165" rel="file-validation-py-L165">165</span>
            <span class="line-number" id="file-validation-py-L166" rel="file-validation-py-L166">166</span>
            <span class="line-number" id="file-validation-py-L167" rel="file-validation-py-L167">167</span>
            <span class="line-number" id="file-validation-py-L168" rel="file-validation-py-L168">168</span>
            <span class="line-number" id="file-validation-py-L169" rel="file-validation-py-L169">169</span>
            <span class="line-number" id="file-validation-py-L170" rel="file-validation-py-L170">170</span>
            <span class="line-number" id="file-validation-py-L171" rel="file-validation-py-L171">171</span>
            <span class="line-number" id="file-validation-py-L172" rel="file-validation-py-L172">172</span>
            <span class="line-number" id="file-validation-py-L173" rel="file-validation-py-L173">173</span>
            <span class="line-number" id="file-validation-py-L174" rel="file-validation-py-L174">174</span>
            <span class="line-number" id="file-validation-py-L175" rel="file-validation-py-L175">175</span>
            <span class="line-number" id="file-validation-py-L176" rel="file-validation-py-L176">176</span>
            <span class="line-number" id="file-validation-py-L177" rel="file-validation-py-L177">177</span>
            <span class="line-number" id="file-validation-py-L178" rel="file-validation-py-L178">178</span>
            <span class="line-number" id="file-validation-py-L179" rel="file-validation-py-L179">179</span>
            <span class="line-number" id="file-validation-py-L180" rel="file-validation-py-L180">180</span>
            <span class="line-number" id="file-validation-py-L181" rel="file-validation-py-L181">181</span>
            <span class="line-number" id="file-validation-py-L182" rel="file-validation-py-L182">182</span>
            <span class="line-number" id="file-validation-py-L183" rel="file-validation-py-L183">183</span>
            <span class="line-number" id="file-validation-py-L184" rel="file-validation-py-L184">184</span>
            <span class="line-number" id="file-validation-py-L185" rel="file-validation-py-L185">185</span>
            <span class="line-number" id="file-validation-py-L186" rel="file-validation-py-L186">186</span>
            <span class="line-number" id="file-validation-py-L187" rel="file-validation-py-L187">187</span>
            <span class="line-number" id="file-validation-py-L188" rel="file-validation-py-L188">188</span>
            <span class="line-number" id="file-validation-py-L189" rel="file-validation-py-L189">189</span>
            <span class="line-number" id="file-validation-py-L190" rel="file-validation-py-L190">190</span>
            <span class="line-number" id="file-validation-py-L191" rel="file-validation-py-L191">191</span>
            <span class="line-number" id="file-validation-py-L192" rel="file-validation-py-L192">192</span>
            <span class="line-number" id="file-validation-py-L193" rel="file-validation-py-L193">193</span>
            <span class="line-number" id="file-validation-py-L194" rel="file-validation-py-L194">194</span>
            <span class="line-number" id="file-validation-py-L195" rel="file-validation-py-L195">195</span>
            <span class="line-number" id="file-validation-py-L196" rel="file-validation-py-L196">196</span>
            <span class="line-number" id="file-validation-py-L197" rel="file-validation-py-L197">197</span>
            <span class="line-number" id="file-validation-py-L198" rel="file-validation-py-L198">198</span>
            <span class="line-number" id="file-validation-py-L199" rel="file-validation-py-L199">199</span>
            <span class="line-number" id="file-validation-py-L200" rel="file-validation-py-L200">200</span>
            <span class="line-number" id="file-validation-py-L201" rel="file-validation-py-L201">201</span>
            <span class="line-number" id="file-validation-py-L202" rel="file-validation-py-L202">202</span>
            <span class="line-number" id="file-validation-py-L203" rel="file-validation-py-L203">203</span>
            <span class="line-number" id="file-validation-py-L204" rel="file-validation-py-L204">204</span>
            <span class="line-number" id="file-validation-py-L205" rel="file-validation-py-L205">205</span>
            <span class="line-number" id="file-validation-py-L206" rel="file-validation-py-L206">206</span>
            <span class="line-number" id="file-validation-py-L207" rel="file-validation-py-L207">207</span>
            <span class="line-number" id="file-validation-py-L208" rel="file-validation-py-L208">208</span>
            <span class="line-number" id="file-validation-py-L209" rel="file-validation-py-L209">209</span>
            <span class="line-number" id="file-validation-py-L210" rel="file-validation-py-L210">210</span>
            <span class="line-number" id="file-validation-py-L211" rel="file-validation-py-L211">211</span>
            <span class="line-number" id="file-validation-py-L212" rel="file-validation-py-L212">212</span>
            <span class="line-number" id="file-validation-py-L213" rel="file-validation-py-L213">213</span>
            <span class="line-number" id="file-validation-py-L214" rel="file-validation-py-L214">214</span>
            <span class="line-number" id="file-validation-py-L215" rel="file-validation-py-L215">215</span>
            <span class="line-number" id="file-validation-py-L216" rel="file-validation-py-L216">216</span>
            <span class="line-number" id="file-validation-py-L217" rel="file-validation-py-L217">217</span>
            <span class="line-number" id="file-validation-py-L218" rel="file-validation-py-L218">218</span>
            <span class="line-number" id="file-validation-py-L219" rel="file-validation-py-L219">219</span>
            <span class="line-number" id="file-validation-py-L220" rel="file-validation-py-L220">220</span>
            <span class="line-number" id="file-validation-py-L221" rel="file-validation-py-L221">221</span>
            <span class="line-number" id="file-validation-py-L222" rel="file-validation-py-L222">222</span>
            <span class="line-number" id="file-validation-py-L223" rel="file-validation-py-L223">223</span>
            <span class="line-number" id="file-validation-py-L224" rel="file-validation-py-L224">224</span>
            <span class="line-number" id="file-validation-py-L225" rel="file-validation-py-L225">225</span>
            <span class="line-number" id="file-validation-py-L226" rel="file-validation-py-L226">226</span>
            <span class="line-number" id="file-validation-py-L227" rel="file-validation-py-L227">227</span>
            <span class="line-number" id="file-validation-py-L228" rel="file-validation-py-L228">228</span>
            <span class="line-number" id="file-validation-py-L229" rel="file-validation-py-L229">229</span>
            <span class="line-number" id="file-validation-py-L230" rel="file-validation-py-L230">230</span>
            <span class="line-number" id="file-validation-py-L231" rel="file-validation-py-L231">231</span>
            <span class="line-number" id="file-validation-py-L232" rel="file-validation-py-L232">232</span>
            <span class="line-number" id="file-validation-py-L233" rel="file-validation-py-L233">233</span>
            <span class="line-number" id="file-validation-py-L234" rel="file-validation-py-L234">234</span>
            <span class="line-number" id="file-validation-py-L235" rel="file-validation-py-L235">235</span>
            <span class="line-number" id="file-validation-py-L236" rel="file-validation-py-L236">236</span>
            <span class="line-number" id="file-validation-py-L237" rel="file-validation-py-L237">237</span>
            <span class="line-number" id="file-validation-py-L238" rel="file-validation-py-L238">238</span>
            <span class="line-number" id="file-validation-py-L239" rel="file-validation-py-L239">239</span>
            <span class="line-number" id="file-validation-py-L240" rel="file-validation-py-L240">240</span>
            <span class="line-number" id="file-validation-py-L241" rel="file-validation-py-L241">241</span>
            <span class="line-number" id="file-validation-py-L242" rel="file-validation-py-L242">242</span>
            <span class="line-number" id="file-validation-py-L243" rel="file-validation-py-L243">243</span>
            <span class="line-number" id="file-validation-py-L244" rel="file-validation-py-L244">244</span>
            <span class="line-number" id="file-validation-py-L245" rel="file-validation-py-L245">245</span>
            <span class="line-number" id="file-validation-py-L246" rel="file-validation-py-L246">246</span>
            <span class="line-number" id="file-validation-py-L247" rel="file-validation-py-L247">247</span>
            <span class="line-number" id="file-validation-py-L248" rel="file-validation-py-L248">248</span>
            <span class="line-number" id="file-validation-py-L249" rel="file-validation-py-L249">249</span>
            <span class="line-number" id="file-validation-py-L250" rel="file-validation-py-L250">250</span>
            <span class="line-number" id="file-validation-py-L251" rel="file-validation-py-L251">251</span>
            <span class="line-number" id="file-validation-py-L252" rel="file-validation-py-L252">252</span>
            <span class="line-number" id="file-validation-py-L253" rel="file-validation-py-L253">253</span>
            <span class="line-number" id="file-validation-py-L254" rel="file-validation-py-L254">254</span>
            <span class="line-number" id="file-validation-py-L255" rel="file-validation-py-L255">255</span>
            <span class="line-number" id="file-validation-py-L256" rel="file-validation-py-L256">256</span>
            <span class="line-number" id="file-validation-py-L257" rel="file-validation-py-L257">257</span>
            <span class="line-number" id="file-validation-py-L258" rel="file-validation-py-L258">258</span>
            <span class="line-number" id="file-validation-py-L259" rel="file-validation-py-L259">259</span>
            <span class="line-number" id="file-validation-py-L260" rel="file-validation-py-L260">260</span>
            <span class="line-number" id="file-validation-py-L261" rel="file-validation-py-L261">261</span>
            <span class="line-number" id="file-validation-py-L262" rel="file-validation-py-L262">262</span>
            <span class="line-number" id="file-validation-py-L263" rel="file-validation-py-L263">263</span>
            <span class="line-number" id="file-validation-py-L264" rel="file-validation-py-L264">264</span>
            <span class="line-number" id="file-validation-py-L265" rel="file-validation-py-L265">265</span>
            <span class="line-number" id="file-validation-py-L266" rel="file-validation-py-L266">266</span>
            <span class="line-number" id="file-validation-py-L267" rel="file-validation-py-L267">267</span>
            <span class="line-number" id="file-validation-py-L268" rel="file-validation-py-L268">268</span>
            <span class="line-number" id="file-validation-py-L269" rel="file-validation-py-L269">269</span>
            <span class="line-number" id="file-validation-py-L270" rel="file-validation-py-L270">270</span>
            <span class="line-number" id="file-validation-py-L271" rel="file-validation-py-L271">271</span>
            <span class="line-number" id="file-validation-py-L272" rel="file-validation-py-L272">272</span>
            <span class="line-number" id="file-validation-py-L273" rel="file-validation-py-L273">273</span>
            <span class="line-number" id="file-validation-py-L274" rel="file-validation-py-L274">274</span>
            <span class="line-number" id="file-validation-py-L275" rel="file-validation-py-L275">275</span>
            <span class="line-number" id="file-validation-py-L276" rel="file-validation-py-L276">276</span>
            <span class="line-number" id="file-validation-py-L277" rel="file-validation-py-L277">277</span>
            <span class="line-number" id="file-validation-py-L278" rel="file-validation-py-L278">278</span>
            <span class="line-number" id="file-validation-py-L279" rel="file-validation-py-L279">279</span>
            <span class="line-number" id="file-validation-py-L280" rel="file-validation-py-L280">280</span>
            <span class="line-number" id="file-validation-py-L281" rel="file-validation-py-L281">281</span>
            <span class="line-number" id="file-validation-py-L282" rel="file-validation-py-L282">282</span>
            <span class="line-number" id="file-validation-py-L283" rel="file-validation-py-L283">283</span>
            <span class="line-number" id="file-validation-py-L284" rel="file-validation-py-L284">284</span>
            <span class="line-number" id="file-validation-py-L285" rel="file-validation-py-L285">285</span>
            <span class="line-number" id="file-validation-py-L286" rel="file-validation-py-L286">286</span>
            <span class="line-number" id="file-validation-py-L287" rel="file-validation-py-L287">287</span>
            <span class="line-number" id="file-validation-py-L288" rel="file-validation-py-L288">288</span>
            <span class="line-number" id="file-validation-py-L289" rel="file-validation-py-L289">289</span>
            <span class="line-number" id="file-validation-py-L290" rel="file-validation-py-L290">290</span>
            <span class="line-number" id="file-validation-py-L291" rel="file-validation-py-L291">291</span>
            <span class="line-number" id="file-validation-py-L292" rel="file-validation-py-L292">292</span>
            <span class="line-number" id="file-validation-py-L293" rel="file-validation-py-L293">293</span>
            <span class="line-number" id="file-validation-py-L294" rel="file-validation-py-L294">294</span>
            <span class="line-number" id="file-validation-py-L295" rel="file-validation-py-L295">295</span>
            <span class="line-number" id="file-validation-py-L296" rel="file-validation-py-L296">296</span>
            <span class="line-number" id="file-validation-py-L297" rel="file-validation-py-L297">297</span>
            <span class="line-number" id="file-validation-py-L298" rel="file-validation-py-L298">298</span>
            <span class="line-number" id="file-validation-py-L299" rel="file-validation-py-L299">299</span>
            <span class="line-number" id="file-validation-py-L300" rel="file-validation-py-L300">300</span>
            <span class="line-number" id="file-validation-py-L301" rel="file-validation-py-L301">301</span>
            <span class="line-number" id="file-validation-py-L302" rel="file-validation-py-L302">302</span>
            <span class="line-number" id="file-validation-py-L303" rel="file-validation-py-L303">303</span>
            <span class="line-number" id="file-validation-py-L304" rel="file-validation-py-L304">304</span>
            <span class="line-number" id="file-validation-py-L305" rel="file-validation-py-L305">305</span>
            <span class="line-number" id="file-validation-py-L306" rel="file-validation-py-L306">306</span>
            <span class="line-number" id="file-validation-py-L307" rel="file-validation-py-L307">307</span>
            <span class="line-number" id="file-validation-py-L308" rel="file-validation-py-L308">308</span>
            <span class="line-number" id="file-validation-py-L309" rel="file-validation-py-L309">309</span>
            <span class="line-number" id="file-validation-py-L310" rel="file-validation-py-L310">310</span>
            <span class="line-number" id="file-validation-py-L311" rel="file-validation-py-L311">311</span>
            <span class="line-number" id="file-validation-py-L312" rel="file-validation-py-L312">312</span>
            <span class="line-number" id="file-validation-py-L313" rel="file-validation-py-L313">313</span>
            <span class="line-number" id="file-validation-py-L314" rel="file-validation-py-L314">314</span>
            <span class="line-number" id="file-validation-py-L315" rel="file-validation-py-L315">315</span>
            <span class="line-number" id="file-validation-py-L316" rel="file-validation-py-L316">316</span>
            <span class="line-number" id="file-validation-py-L317" rel="file-validation-py-L317">317</span>
            <span class="line-number" id="file-validation-py-L318" rel="file-validation-py-L318">318</span>
            <span class="line-number" id="file-validation-py-L319" rel="file-validation-py-L319">319</span>
            <span class="line-number" id="file-validation-py-L320" rel="file-validation-py-L320">320</span>
            <span class="line-number" id="file-validation-py-L321" rel="file-validation-py-L321">321</span>
            <span class="line-number" id="file-validation-py-L322" rel="file-validation-py-L322">322</span>
            <span class="line-number" id="file-validation-py-L323" rel="file-validation-py-L323">323</span>
            <span class="line-number" id="file-validation-py-L324" rel="file-validation-py-L324">324</span>
            <span class="line-number" id="file-validation-py-L325" rel="file-validation-py-L325">325</span>
            <span class="line-number" id="file-validation-py-L326" rel="file-validation-py-L326">326</span>
            <span class="line-number" id="file-validation-py-L327" rel="file-validation-py-L327">327</span>
            <span class="line-number" id="file-validation-py-L328" rel="file-validation-py-L328">328</span>
            <span class="line-number" id="file-validation-py-L329" rel="file-validation-py-L329">329</span>
            <span class="line-number" id="file-validation-py-L330" rel="file-validation-py-L330">330</span>
            <span class="line-number" id="file-validation-py-L331" rel="file-validation-py-L331">331</span>
            <span class="line-number" id="file-validation-py-L332" rel="file-validation-py-L332">332</span>
            <span class="line-number" id="file-validation-py-L333" rel="file-validation-py-L333">333</span>
            <span class="line-number" id="file-validation-py-L334" rel="file-validation-py-L334">334</span>
            <span class="line-number" id="file-validation-py-L335" rel="file-validation-py-L335">335</span>
            <span class="line-number" id="file-validation-py-L336" rel="file-validation-py-L336">336</span>
            <span class="line-number" id="file-validation-py-L337" rel="file-validation-py-L337">337</span>
            <span class="line-number" id="file-validation-py-L338" rel="file-validation-py-L338">338</span>
            <span class="line-number" id="file-validation-py-L339" rel="file-validation-py-L339">339</span>
            <span class="line-number" id="file-validation-py-L340" rel="file-validation-py-L340">340</span>
            <span class="line-number" id="file-validation-py-L341" rel="file-validation-py-L341">341</span>
            <span class="line-number" id="file-validation-py-L342" rel="file-validation-py-L342">342</span>
            <span class="line-number" id="file-validation-py-L343" rel="file-validation-py-L343">343</span>
            <span class="line-number" id="file-validation-py-L344" rel="file-validation-py-L344">344</span>
            <span class="line-number" id="file-validation-py-L345" rel="file-validation-py-L345">345</span>
            <span class="line-number" id="file-validation-py-L346" rel="file-validation-py-L346">346</span>
            <span class="line-number" id="file-validation-py-L347" rel="file-validation-py-L347">347</span>
            <span class="line-number" id="file-validation-py-L348" rel="file-validation-py-L348">348</span>
            <span class="line-number" id="file-validation-py-L349" rel="file-validation-py-L349">349</span>
            <span class="line-number" id="file-validation-py-L350" rel="file-validation-py-L350">350</span>
            <span class="line-number" id="file-validation-py-L351" rel="file-validation-py-L351">351</span>
            <span class="line-number" id="file-validation-py-L352" rel="file-validation-py-L352">352</span>
            <span class="line-number" id="file-validation-py-L353" rel="file-validation-py-L353">353</span>
            <span class="line-number" id="file-validation-py-L354" rel="file-validation-py-L354">354</span>
            <span class="line-number" id="file-validation-py-L355" rel="file-validation-py-L355">355</span>
            <span class="line-number" id="file-validation-py-L356" rel="file-validation-py-L356">356</span>
            <span class="line-number" id="file-validation-py-L357" rel="file-validation-py-L357">357</span>
            <span class="line-number" id="file-validation-py-L358" rel="file-validation-py-L358">358</span>
            <span class="line-number" id="file-validation-py-L359" rel="file-validation-py-L359">359</span>
            <span class="line-number" id="file-validation-py-L360" rel="file-validation-py-L360">360</span>
            <span class="line-number" id="file-validation-py-L361" rel="file-validation-py-L361">361</span>
            <span class="line-number" id="file-validation-py-L362" rel="file-validation-py-L362">362</span>
            <span class="line-number" id="file-validation-py-L363" rel="file-validation-py-L363">363</span>
            <span class="line-number" id="file-validation-py-L364" rel="file-validation-py-L364">364</span>
            <span class="line-number" id="file-validation-py-L365" rel="file-validation-py-L365">365</span>
            <span class="line-number" id="file-validation-py-L366" rel="file-validation-py-L366">366</span>
            <span class="line-number" id="file-validation-py-L367" rel="file-validation-py-L367">367</span>
            <span class="line-number" id="file-validation-py-L368" rel="file-validation-py-L368">368</span>
            <span class="line-number" id="file-validation-py-L369" rel="file-validation-py-L369">369</span>
            <span class="line-number" id="file-validation-py-L370" rel="file-validation-py-L370">370</span>
            <span class="line-number" id="file-validation-py-L371" rel="file-validation-py-L371">371</span>
            <span class="line-number" id="file-validation-py-L372" rel="file-validation-py-L372">372</span>
            <span class="line-number" id="file-validation-py-L373" rel="file-validation-py-L373">373</span>
            <span class="line-number" id="file-validation-py-L374" rel="file-validation-py-L374">374</span>
            <span class="line-number" id="file-validation-py-L375" rel="file-validation-py-L375">375</span>
            <span class="line-number" id="file-validation-py-L376" rel="file-validation-py-L376">376</span>
            <span class="line-number" id="file-validation-py-L377" rel="file-validation-py-L377">377</span>
            <span class="line-number" id="file-validation-py-L378" rel="file-validation-py-L378">378</span>
            <span class="line-number" id="file-validation-py-L379" rel="file-validation-py-L379">379</span>
            <span class="line-number" id="file-validation-py-L380" rel="file-validation-py-L380">380</span>
            <span class="line-number" id="file-validation-py-L381" rel="file-validation-py-L381">381</span>
            <span class="line-number" id="file-validation-py-L382" rel="file-validation-py-L382">382</span>
            <span class="line-number" id="file-validation-py-L383" rel="file-validation-py-L383">383</span>
            <span class="line-number" id="file-validation-py-L384" rel="file-validation-py-L384">384</span>
            <span class="line-number" id="file-validation-py-L385" rel="file-validation-py-L385">385</span>
            <span class="line-number" id="file-validation-py-L386" rel="file-validation-py-L386">386</span>
            <span class="line-number" id="file-validation-py-L387" rel="file-validation-py-L387">387</span>
            <span class="line-number" id="file-validation-py-L388" rel="file-validation-py-L388">388</span>
            <span class="line-number" id="file-validation-py-L389" rel="file-validation-py-L389">389</span>
            <span class="line-number" id="file-validation-py-L390" rel="file-validation-py-L390">390</span>
            <span class="line-number" id="file-validation-py-L391" rel="file-validation-py-L391">391</span>
            <span class="line-number" id="file-validation-py-L392" rel="file-validation-py-L392">392</span>
            <span class="line-number" id="file-validation-py-L393" rel="file-validation-py-L393">393</span>
            <span class="line-number" id="file-validation-py-L394" rel="file-validation-py-L394">394</span>
            <span class="line-number" id="file-validation-py-L395" rel="file-validation-py-L395">395</span>
            <span class="line-number" id="file-validation-py-L396" rel="file-validation-py-L396">396</span>
            <span class="line-number" id="file-validation-py-L397" rel="file-validation-py-L397">397</span>
            <span class="line-number" id="file-validation-py-L398" rel="file-validation-py-L398">398</span>
            <span class="line-number" id="file-validation-py-L399" rel="file-validation-py-L399">399</span>
            <span class="line-number" id="file-validation-py-L400" rel="file-validation-py-L400">400</span>
            <span class="line-number" id="file-validation-py-L401" rel="file-validation-py-L401">401</span>
            <span class="line-number" id="file-validation-py-L402" rel="file-validation-py-L402">402</span>
            <span class="line-number" id="file-validation-py-L403" rel="file-validation-py-L403">403</span>
            <span class="line-number" id="file-validation-py-L404" rel="file-validation-py-L404">404</span>
            <span class="line-number" id="file-validation-py-L405" rel="file-validation-py-L405">405</span>
            <span class="line-number" id="file-validation-py-L406" rel="file-validation-py-L406">406</span>
            <span class="line-number" id="file-validation-py-L407" rel="file-validation-py-L407">407</span>
            <span class="line-number" id="file-validation-py-L408" rel="file-validation-py-L408">408</span>
            <span class="line-number" id="file-validation-py-L409" rel="file-validation-py-L409">409</span>
            <span class="line-number" id="file-validation-py-L410" rel="file-validation-py-L410">410</span>
            <span class="line-number" id="file-validation-py-L411" rel="file-validation-py-L411">411</span>
            <span class="line-number" id="file-validation-py-L412" rel="file-validation-py-L412">412</span>
            <span class="line-number" id="file-validation-py-L413" rel="file-validation-py-L413">413</span>
            <span class="line-number" id="file-validation-py-L414" rel="file-validation-py-L414">414</span>
            <span class="line-number" id="file-validation-py-L415" rel="file-validation-py-L415">415</span>
            <span class="line-number" id="file-validation-py-L416" rel="file-validation-py-L416">416</span>
            <span class="line-number" id="file-validation-py-L417" rel="file-validation-py-L417">417</span>
            <span class="line-number" id="file-validation-py-L418" rel="file-validation-py-L418">418</span>
            <span class="line-number" id="file-validation-py-L419" rel="file-validation-py-L419">419</span>
            <span class="line-number" id="file-validation-py-L420" rel="file-validation-py-L420">420</span>
            <span class="line-number" id="file-validation-py-L421" rel="file-validation-py-L421">421</span>
            <span class="line-number" id="file-validation-py-L422" rel="file-validation-py-L422">422</span>
            <span class="line-number" id="file-validation-py-L423" rel="file-validation-py-L423">423</span>
            <span class="line-number" id="file-validation-py-L424" rel="file-validation-py-L424">424</span>
            <span class="line-number" id="file-validation-py-L425" rel="file-validation-py-L425">425</span>
            <span class="line-number" id="file-validation-py-L426" rel="file-validation-py-L426">426</span>
            <span class="line-number" id="file-validation-py-L427" rel="file-validation-py-L427">427</span>
            <span class="line-number" id="file-validation-py-L428" rel="file-validation-py-L428">428</span>
            <span class="line-number" id="file-validation-py-L429" rel="file-validation-py-L429">429</span>
            <span class="line-number" id="file-validation-py-L430" rel="file-validation-py-L430">430</span>
            <span class="line-number" id="file-validation-py-L431" rel="file-validation-py-L431">431</span>
            <span class="line-number" id="file-validation-py-L432" rel="file-validation-py-L432">432</span>
            <span class="line-number" id="file-validation-py-L433" rel="file-validation-py-L433">433</span>
            <span class="line-number" id="file-validation-py-L434" rel="file-validation-py-L434">434</span>
            <span class="line-number" id="file-validation-py-L435" rel="file-validation-py-L435">435</span>
            <span class="line-number" id="file-validation-py-L436" rel="file-validation-py-L436">436</span>
            <span class="line-number" id="file-validation-py-L437" rel="file-validation-py-L437">437</span>
            <span class="line-number" id="file-validation-py-L438" rel="file-validation-py-L438">438</span>
            <span class="line-number" id="file-validation-py-L439" rel="file-validation-py-L439">439</span>
            <span class="line-number" id="file-validation-py-L440" rel="file-validation-py-L440">440</span>
            <span class="line-number" id="file-validation-py-L441" rel="file-validation-py-L441">441</span>
            <span class="line-number" id="file-validation-py-L442" rel="file-validation-py-L442">442</span>
            <span class="line-number" id="file-validation-py-L443" rel="file-validation-py-L443">443</span>
            <span class="line-number" id="file-validation-py-L444" rel="file-validation-py-L444">444</span>
            <span class="line-number" id="file-validation-py-L445" rel="file-validation-py-L445">445</span>
            <span class="line-number" id="file-validation-py-L446" rel="file-validation-py-L446">446</span>
            <span class="line-number" id="file-validation-py-L447" rel="file-validation-py-L447">447</span>
            <span class="line-number" id="file-validation-py-L448" rel="file-validation-py-L448">448</span>
            <span class="line-number" id="file-validation-py-L449" rel="file-validation-py-L449">449</span>
            <span class="line-number" id="file-validation-py-L450" rel="file-validation-py-L450">450</span>
            <span class="line-number" id="file-validation-py-L451" rel="file-validation-py-L451">451</span>
            <span class="line-number" id="file-validation-py-L452" rel="file-validation-py-L452">452</span>
            <span class="line-number" id="file-validation-py-L453" rel="file-validation-py-L453">453</span>
            <span class="line-number" id="file-validation-py-L454" rel="file-validation-py-L454">454</span>
            <span class="line-number" id="file-validation-py-L455" rel="file-validation-py-L455">455</span>
            <span class="line-number" id="file-validation-py-L456" rel="file-validation-py-L456">456</span>
            <span class="line-number" id="file-validation-py-L457" rel="file-validation-py-L457">457</span>
            <span class="line-number" id="file-validation-py-L458" rel="file-validation-py-L458">458</span>
            <span class="line-number" id="file-validation-py-L459" rel="file-validation-py-L459">459</span>
            <span class="line-number" id="file-validation-py-L460" rel="file-validation-py-L460">460</span>
            <span class="line-number" id="file-validation-py-L461" rel="file-validation-py-L461">461</span>
            <span class="line-number" id="file-validation-py-L462" rel="file-validation-py-L462">462</span>
            <span class="line-number" id="file-validation-py-L463" rel="file-validation-py-L463">463</span>
            <span class="line-number" id="file-validation-py-L464" rel="file-validation-py-L464">464</span>
            <span class="line-number" id="file-validation-py-L465" rel="file-validation-py-L465">465</span>
            <span class="line-number" id="file-validation-py-L466" rel="file-validation-py-L466">466</span>
            <span class="line-number" id="file-validation-py-L467" rel="file-validation-py-L467">467</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-validation-py-LC1"><span class="kn">import</span> <span class="nn">copy</span></div><div class="line" id="file-validation-py-LC2">&nbsp;</div><div class="line" id="file-validation-py-LC3"><span class="kn">from</span> <span class="nn">django.db.models.aggregates</span> <span class="kn">import</span> <span class="n">Aggregate</span></div><div class="line" id="file-validation-py-LC4"><span class="kn">from</span> <span class="nn">django.db.models.base</span> <span class="kn">import</span> <span class="n">ModelBase</span></div><div class="line" id="file-validation-py-LC5"><span class="kn">from</span> <span class="nn">django.db.models.manager</span> <span class="kn">import</span> <span class="n">Manager</span></div><div class="line" id="file-validation-py-LC6"><span class="kn">from</span> <span class="nn">django.db.models.query</span> <span class="kn">import</span> <span class="n">QuerySet</span></div><div class="line" id="file-validation-py-LC7">&nbsp;</div><div class="line" id="file-validation-py-LC8"><span class="kn">from</span> <span class="nn">.exceptions</span> <span class="kn">import</span> <span class="n">APIInputError</span></div><div class="line" id="file-validation-py-LC9">&nbsp;</div><div class="line" id="file-validation-py-LC10">&nbsp;</div><div class="line" id="file-validation-py-LC11"><span class="k">def</span> <span class="nf">_validate_field_lookup_term</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">term</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC12">    <span class="sd">&quot;&quot;&quot;Checks whether the term is a valid field_lookup for the model.</span></div><div class="line" id="file-validation-py-LC13"><span class="sd">    </span></div><div class="line" id="file-validation-py-LC14"><span class="sd">    **Args**:</span></div><div class="line" id="file-validation-py-LC15"><span class="sd">    - **model** (**required**) - a django model for which to check whether </span></div><div class="line" id="file-validation-py-LC16"><span class="sd">      the term is a valid field_lookup.</span></div><div class="line" id="file-validation-py-LC17"><span class="sd">    - **term** (**required**) - the term to check whether it is a valid </span></div><div class="line" id="file-validation-py-LC18"><span class="sd">      field lookup for the model supplied.</span></div><div class="line" id="file-validation-py-LC19"><span class="sd">            </span></div><div class="line" id="file-validation-py-LC20"><span class="sd">    **Returns**:</span></div><div class="line" id="file-validation-py-LC21"><span class="sd">    -  The verbose name of the field if the supplied term is a valid field.</span></div><div class="line" id="file-validation-py-LC22"><span class="sd">    </span></div><div class="line" id="file-validation-py-LC23"><span class="sd">    **Raises**:</span></div><div class="line" id="file-validation-py-LC24"><span class="sd">    - APIInputError: If the term supplied is not a valid field lookup </span></div><div class="line" id="file-validation-py-LC25"><span class="sd">      parameter for the model.</span></div><div class="line" id="file-validation-py-LC26"><span class="sd">    &quot;&quot;&quot;</span></div><div class="line" id="file-validation-py-LC27">    <span class="c"># TODO: Memoization for speed enchancements?</span></div><div class="line" id="file-validation-py-LC28">    <span class="n">terms</span> <span class="o">=</span> <span class="n">term</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;__&#39;</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC29">    </div><div class="line" id="file-validation-py-LC30">    <span class="c"># model_fields = model._meta.get_all_field_names()</span></div><div class="line" id="file-validation-py-LC31">    <span class="c"># if terms[0] not in model_fields:</span></div><div class="line" id="file-validation-py-LC32">    <span class="c">#     raise APIInputError(&quot;Field %r does not exist. Valid lookups are %s.&quot; </span></div><div class="line" id="file-validation-py-LC33">    <span class="c">#                      % (terms[0], &#39;, &#39;.join(model_fields)))</span></div><div class="line" id="file-validation-py-LC34">    <span class="c"># if len(terms) == 1:</span></div><div class="line" id="file-validation-py-LC35">    <span class="c">#     return model._meta.get_field(terms[0]).verbose_name</span></div><div class="line" id="file-validation-py-LC36">    <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC37">        <span class="n">model_fields</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()</span></div><div class="line" id="file-validation-py-LC38">    <span class="k">except</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC39">        <span class="n">model_fields</span> <span class="o">=</span> <span class="p">[]</span></div><div class="line" id="file-validation-py-LC40">    <span class="k">if</span> <span class="n">terms</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">model_fields</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC41">        <span class="k">pass</span></div><div class="line" id="file-validation-py-LC42">    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">terms</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC43">        <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC44">            <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">terms</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">verbose_name</span></div><div class="line" id="file-validation-py-LC45">        <span class="k">except</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC46">            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">terms</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span></div><div class="line" id="file-validation-py-LC47">&nbsp;</div><div class="line" id="file-validation-py-LC48">    <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC49">        <span class="c"># DocString details for model._meta.get_field_by_name  </span></div><div class="line" id="file-validation-py-LC50">        <span class="c"># </span></div><div class="line" id="file-validation-py-LC51">        <span class="c"># Returns a tuple (field_object, model, direct, m2m), where </span></div><div class="line" id="file-validation-py-LC52">        <span class="c">#     field_object is the Field instance for the given name, </span></div><div class="line" id="file-validation-py-LC53">        <span class="c">#     model is the model containing this field (None for </span></div><div class="line" id="file-validation-py-LC54">        <span class="c">#         local fields), </span></div><div class="line" id="file-validation-py-LC55">        <span class="c">#     direct is True if the field exists on this model, </span></div><div class="line" id="file-validation-py-LC56">        <span class="c">#     and m2m is True for many-to-many relations. </span></div><div class="line" id="file-validation-py-LC57">        <span class="c"># When &#39;direct&#39; is False, &#39;field_object&#39; is the corresponding </span></div><div class="line" id="file-validation-py-LC58">        <span class="c"># RelatedObject for this field (since the field doesn&#39;t have </span></div><div class="line" id="file-validation-py-LC59">        <span class="c"># an instance associated with it).</span></div><div class="line" id="file-validation-py-LC60">        <span class="n">field_details</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field_by_name</span><span class="p">(</span><span class="n">terms</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span></div><div class="line" id="file-validation-py-LC61">        <span class="c"># if the field is direct field</span></div><div class="line" id="file-validation-py-LC62">        <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC63">            <span class="k">if</span> <span class="n">field_details</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span></div><div class="line" id="file-validation-py-LC64">                <span class="n">m</span> <span class="o">=</span> <span class="n">field_details</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">related</span><span class="o">.</span><span class="n">parent_model</span></div><div class="line" id="file-validation-py-LC65">            <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC66">                <span class="n">m</span> <span class="o">=</span> <span class="n">field_details</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">model</span></div><div class="line" id="file-validation-py-LC67">        <span class="k">except</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC68">            <span class="n">m</span> <span class="o">=</span> <span class="n">field_details</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC69">        </div><div class="line" id="file-validation-py-LC70">        <span class="k">return</span> <span class="n">_validate_field_lookup_term</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s">&#39;__&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">terms</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span></div><div class="line" id="file-validation-py-LC71">&nbsp;</div><div class="line" id="file-validation-py-LC72"><span class="k">def</span> <span class="nf">_clean_source</span><span class="p">(</span><span class="n">source</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC73">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">ModelBase</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC74">        <span class="k">return</span> <span class="n">source</span><span class="o">.</span><span class="n">_base_manager</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></div><div class="line" id="file-validation-py-LC75">    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">Manager</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC76">        <span class="k">return</span> <span class="n">source</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></div><div class="line" id="file-validation-py-LC77">    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">QuerySet</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC78">        <span class="k">return</span> <span class="n">source</span></div><div class="line" id="file-validation-py-LC79">    <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;&#39;source&#39; must either be a QuerySet, Model or &quot;</span></div><div class="line" id="file-validation-py-LC80">                        <span class="s">&quot;Manager. Got </span><span class="si">%s</span><span class="s"> of type </span><span class="si">%s</span><span class="s"> instead.&quot;</span>  </div><div class="line" id="file-validation-py-LC81">                        <span class="o">%</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">source</span><span class="p">)))</span></div><div class="line" id="file-validation-py-LC82">&nbsp;</div><div class="line" id="file-validation-py-LC83"><span class="k">def</span> <span class="nf">_validate_func</span><span class="p">(</span><span class="n">func</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC84">    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">Aggregate</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC85">        <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;&#39;func&#39; must an instance of django Aggregate. &quot;</span></div><div class="line" id="file-validation-py-LC86">                            <span class="s">&quot;Got </span><span class="si">%s</span><span class="s"> of type </span><span class="si">%s</span><span class="s"> instead&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">func</span><span class="p">)))</span></div><div class="line" id="file-validation-py-LC87">&nbsp;</div><div class="line" id="file-validation-py-LC88"><span class="k">def</span> <span class="nf">_clean_categories</span><span class="p">(</span><span class="n">categories</span><span class="p">,</span> <span class="n">source</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC89">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">categories</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC90">        <span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="n">categories</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC91">    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">categories</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span></div><div class="line" id="file-validation-py-LC92">        <span class="k">if</span> <span class="ow">not</span> <span class="n">categories</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC93">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;&#39;categories&#39; tuple or list must contain at &quot;</span> </div><div class="line" id="file-validation-py-LC94">                                <span class="s">&quot;least one valid model field. Got </span><span class="si">%s</span><span class="s">.&quot;</span> </div><div class="line" id="file-validation-py-LC95">                                <span class="o">%</span><span class="n">categories</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC96">    <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC97">        <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;&#39;categories&#39; must be one of the following &quot;</span></div><div class="line" id="file-validation-py-LC98">                            <span class="s">&quot;types: basestring, tuple or list. Got </span><span class="si">%s</span><span class="s"> of &quot;</span></div><div class="line" id="file-validation-py-LC99">                            <span class="s">&quot;type </span><span class="si">%s</span><span class="s"> instead.&quot;</span></div><div class="line" id="file-validation-py-LC100">                            <span class="o">%</span><span class="p">(</span><span class="n">categories</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">categories</span><span class="p">)))</span></div><div class="line" id="file-validation-py-LC101">    <span class="n">field_aliases</span> <span class="o">=</span> <span class="p">{}</span></div><div class="line" id="file-validation-py-LC102">    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">categories</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC103">        <span class="n">field_aliases</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">_validate_field_lookup_term</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC104">    <span class="k">return</span> <span class="n">categories</span><span class="p">,</span> <span class="n">field_aliases</span></div><div class="line" id="file-validation-py-LC105">&nbsp;</div><div class="line" id="file-validation-py-LC106"><span class="k">def</span> <span class="nf">_clean_legend_by</span><span class="p">(</span><span class="n">legend_by</span><span class="p">,</span> <span class="n">source</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC107">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">legend_by</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC108">        <span class="n">legend_by</span> <span class="o">=</span> <span class="p">[</span><span class="n">legend_by</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC109">    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">legend_by</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span></div><div class="line" id="file-validation-py-LC110">        <span class="k">pass</span></div><div class="line" id="file-validation-py-LC111">    <span class="k">elif</span> <span class="n">legend_by</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC112">        <span class="n">legend_by</span> <span class="o">=</span> <span class="p">()</span></div><div class="line" id="file-validation-py-LC113">    <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC114">        <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;&#39;legend_by&#39; must be one of the following &quot;</span></div><div class="line" id="file-validation-py-LC115">                            <span class="s">&quot;types: basestring, tuple or list. Got </span><span class="si">%s</span><span class="s"> of &quot;</span></div><div class="line" id="file-validation-py-LC116">                            <span class="s">&quot;type </span><span class="si">%s</span><span class="s"> instead.&quot;</span></div><div class="line" id="file-validation-py-LC117">                            <span class="o">%</span><span class="p">(</span><span class="n">legend_by</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">legend_by</span><span class="p">)))</span></div><div class="line" id="file-validation-py-LC118">    <span class="n">field_aliases</span> <span class="o">=</span> <span class="p">{}</span></div><div class="line" id="file-validation-py-LC119">    <span class="k">for</span> <span class="n">lg</span> <span class="ow">in</span> <span class="n">legend_by</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC120">        <span class="n">field_aliases</span><span class="p">[</span><span class="n">lg</span><span class="p">]</span> <span class="o">=</span> <span class="n">_validate_field_lookup_term</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">lg</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC121">    <span class="k">return</span> <span class="n">legend_by</span><span class="p">,</span> <span class="n">field_aliases</span></div><div class="line" id="file-validation-py-LC122">&nbsp;</div><div class="line" id="file-validation-py-LC123"><span class="k">def</span> <span class="nf">_validate_top_n_per_cat</span><span class="p">(</span><span class="n">top_n_per_cat</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC124">    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">top_n_per_cat</span><span class="p">,</span>  <span class="nb">int</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC125">        <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;&#39;top_n_per_cat&#39; must be an int. Got </span><span class="si">%s</span><span class="s"> of type &quot;</span></div><div class="line" id="file-validation-py-LC126">                            <span class="s">&quot;</span><span class="si">%s</span><span class="s"> instead.&quot;</span> </div><div class="line" id="file-validation-py-LC127">                            <span class="o">%</span><span class="p">(</span><span class="n">top_n_per_cat</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">top_n_per_cat</span><span class="p">)))</span></div><div class="line" id="file-validation-py-LC128">&nbsp;</div><div class="line" id="file-validation-py-LC129"><span class="k">def</span> <span class="nf">_clean_field_aliases</span><span class="p">(</span><span class="n">fa_actual</span><span class="p">,</span> <span class="n">fa_cat</span><span class="p">,</span> <span class="n">fa_lgby</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC130">    <span class="n">fa</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">fa_lgby</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC131">    <span class="n">fa</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fa_cat</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC132">    <span class="n">fa</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fa_actual</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC133">    <span class="k">return</span> <span class="n">fa</span></div><div class="line" id="file-validation-py-LC134">&nbsp;</div><div class="line" id="file-validation-py-LC135"><span class="k">def</span> <span class="nf">_convert_pdps_to_dict</span><span class="p">(</span><span class="n">series_list</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC136">    <span class="n">series_dict</span> <span class="o">=</span> <span class="p">{}</span></div><div class="line" id="file-validation-py-LC137">    <span class="k">for</span> <span class="n">sd</span> <span class="ow">in</span> <span class="n">series_list</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC138">        <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC139">            <span class="n">options</span> <span class="o">=</span> <span class="n">sd</span><span class="p">[</span><span class="s">&#39;options&#39;</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC140">        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC141">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> is missing the &#39;options&#39; key.&quot;</span> <span class="o">%</span><span class="n">sd</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC142">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC143">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a dict in place of: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span><span class="n">options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC144">        </div><div class="line" id="file-validation-py-LC145">        <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC146">            <span class="n">terms</span> <span class="o">=</span> <span class="n">sd</span><span class="p">[</span><span class="s">&#39;terms&#39;</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC147">        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC148">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> is missing have the &#39;terms&#39; key.&quot;</span> <span class="o">%</span><span class="n">sd</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC149">        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">terms</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC150">            <span class="k">if</span> <span class="ow">not</span> <span class="n">terms</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC151">                <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;&#39;terms&#39; cannot be empty.&quot;</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC152">            <span class="k">for</span> <span class="n">tk</span><span class="p">,</span> <span class="n">tv</span> <span class="ow">in</span> <span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span></div><div class="line" id="file-validation-py-LC153">                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tv</span><span class="p">,</span> <span class="n">Aggregate</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC154">                    <span class="n">tv</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;func&#39;</span><span class="p">:</span> <span class="n">tv</span><span class="p">}</span></div><div class="line" id="file-validation-py-LC155">                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tv</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC156">                    <span class="k">pass</span></div><div class="line" id="file-validation-py-LC157">                <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC158">                    <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a dict or django Aggregate &quot;</span></div><div class="line" id="file-validation-py-LC159">                                        <span class="s">&quot;in place of: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span><span class="n">tv</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC160">                <span class="n">opts</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC161">                <span class="n">opts</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tv</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC162">                <span class="n">series_dict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">tk</span><span class="p">:</span> <span class="n">opts</span><span class="p">})</span></div><div class="line" id="file-validation-py-LC163">        <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC164">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a dict in place of: </span><span class="si">%s</span><span class="s">&quot;</span> </div><div class="line" id="file-validation-py-LC165">                                <span class="o">%</span><span class="n">terms</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC166">    <span class="k">return</span> <span class="n">series_dict</span></div><div class="line" id="file-validation-py-LC167">&nbsp;</div><div class="line" id="file-validation-py-LC168">            </div><div class="line" id="file-validation-py-LC169"><span class="k">def</span> <span class="nf">clean_pdps</span><span class="p">(</span><span class="n">series</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC170">    <span class="sd">&quot;&quot;&quot;Clean the PivotDataPool series input from the user.</span></div><div class="line" id="file-validation-py-LC171"><span class="sd">    &quot;&quot;&quot;</span></div><div class="line" id="file-validation-py-LC172">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC173">        <span class="n">series</span> <span class="o">=</span> <span class="n">_convert_pdps_to_dict</span><span class="p">(</span><span class="n">series</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC174">        <span class="n">clean_pdps</span><span class="p">(</span><span class="n">series</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC175">    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC176">        <span class="k">if</span> <span class="ow">not</span> <span class="n">series</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC177">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;&#39;series&#39; cannot be empty.&quot;</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC178">        <span class="k">for</span> <span class="n">td</span> <span class="ow">in</span> <span class="n">series</span><span class="o">.</span><span class="n">values</span><span class="p">():</span></div><div class="line" id="file-validation-py-LC179">            <span class="c"># td is not a dict</span></div><div class="line" id="file-validation-py-LC180">            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">td</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC181">                <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a dict in place of: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span><span class="n">td</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC182">            <span class="c"># source</span></div><div class="line" id="file-validation-py-LC183">            <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC184">                <span class="n">td</span><span class="p">[</span><span class="s">&#39;source&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_clean_source</span><span class="p">(</span><span class="n">td</span><span class="p">[</span><span class="s">&#39;source&#39;</span><span class="p">])</span></div><div class="line" id="file-validation-py-LC185">            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC186">                <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Missing &#39;source&#39;: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">td</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC187">            <span class="c"># func</span></div><div class="line" id="file-validation-py-LC188">            <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC189">                <span class="n">_validate_func</span><span class="p">(</span><span class="n">td</span><span class="p">[</span><span class="s">&#39;func&#39;</span><span class="p">])</span></div><div class="line" id="file-validation-py-LC190">            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC191">                <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Missing &#39;func&#39;: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">td</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC192">            <span class="c"># categories</span></div><div class="line" id="file-validation-py-LC193">            <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC194">                <span class="n">td</span><span class="p">[</span><span class="s">&#39;categories&#39;</span><span class="p">],</span> <span class="n">fa_cat</span> <span class="o">=</span> <span class="n">_clean_categories</span><span class="p">(</span><span class="n">td</span><span class="p">[</span><span class="s">&#39;categories&#39;</span><span class="p">],</span></div><div class="line" id="file-validation-py-LC195">                                                            <span class="n">td</span><span class="p">[</span><span class="s">&#39;source&#39;</span><span class="p">])</span></div><div class="line" id="file-validation-py-LC196">            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC197">                <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Missing &#39;categories&#39;: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">td</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC198">            <span class="c"># legend_by</span></div><div class="line" id="file-validation-py-LC199">            <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC200">                <span class="n">td</span><span class="p">[</span><span class="s">&#39;legend_by&#39;</span><span class="p">],</span> <span class="n">fa_lgby</span> <span class="o">=</span> <span class="n">_clean_legend_by</span><span class="p">(</span><span class="n">td</span><span class="p">[</span><span class="s">&#39;legend_by&#39;</span><span class="p">],</span></div><div class="line" id="file-validation-py-LC201">                                                           <span class="n">td</span><span class="p">[</span><span class="s">&#39;source&#39;</span><span class="p">])</span></div><div class="line" id="file-validation-py-LC202">            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC203">                <span class="n">td</span><span class="p">[</span><span class="s">&#39;legend_by&#39;</span><span class="p">],</span> <span class="n">fa_lgby</span> <span class="o">=</span> <span class="p">(),</span> <span class="p">{}</span></div><div class="line" id="file-validation-py-LC204">            <span class="c"># top_n_per_cat</span></div><div class="line" id="file-validation-py-LC205">            <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC206">                <span class="n">_validate_top_n_per_cat</span><span class="p">(</span><span class="n">td</span><span class="p">[</span><span class="s">&#39;top_n_per_cat&#39;</span><span class="p">])</span></div><div class="line" id="file-validation-py-LC207">            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC208">                <span class="n">td</span><span class="p">[</span><span class="s">&#39;top_n_per_cat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span></div><div class="line" id="file-validation-py-LC209">            <span class="c"># field_aliases</span></div><div class="line" id="file-validation-py-LC210">            <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC211">                <span class="n">fa_actual</span> <span class="o">=</span> <span class="n">td</span><span class="p">[</span><span class="s">&#39;field_aliases&#39;</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC212">            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC213">                <span class="n">td</span><span class="p">[</span><span class="s">&#39;field_aliases&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fa_actual</span> <span class="o">=</span> <span class="p">{}</span></div><div class="line" id="file-validation-py-LC214">            <span class="n">td</span><span class="p">[</span><span class="s">&#39;field_aliases&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_clean_field_aliases</span><span class="p">(</span><span class="n">fa_actual</span><span class="p">,</span> </div><div class="line" id="file-validation-py-LC215">                                                       <span class="n">fa_cat</span><span class="p">,</span> </div><div class="line" id="file-validation-py-LC216">                                                       <span class="n">fa_lgby</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC217">    <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC218">        <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a dict or list in place of: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span><span class="n">series</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC219">    <span class="k">return</span> <span class="n">series</span></div><div class="line" id="file-validation-py-LC220">&nbsp;</div><div class="line" id="file-validation-py-LC221"><span class="k">def</span> <span class="nf">_convert_dps_to_dict</span><span class="p">(</span><span class="n">series_list</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC222">    <span class="n">series_list</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">series_list</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC223">    <span class="n">series_dict</span> <span class="o">=</span> <span class="p">{}</span></div><div class="line" id="file-validation-py-LC224">    <span class="k">if</span> <span class="ow">not</span> <span class="n">series_list</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC225">        <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;&#39;series&#39; cannot be empty.&quot;</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC226">    <span class="k">for</span> <span class="n">sd</span> <span class="ow">in</span> <span class="n">series_list</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC227">        <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC228">            <span class="n">options</span> <span class="o">=</span> <span class="n">sd</span><span class="p">[</span><span class="s">&#39;options&#39;</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC229">        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC230">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> is missing the &#39;options&#39; key.&quot;</span> <span class="o">%</span><span class="n">sd</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC231">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC232">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a dict in place of: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span><span class="n">options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC233">        </div><div class="line" id="file-validation-py-LC234">        <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC235">            <span class="n">terms</span> <span class="o">=</span> <span class="n">sd</span><span class="p">[</span><span class="s">&#39;terms&#39;</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC236">        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC237">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> is missing the &#39;terms&#39; key.&quot;</span> <span class="o">%</span><span class="n">sd</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC238">        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">terms</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC239">            <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">terms</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC240">                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC241">                    <span class="n">series_dict</span><span class="p">[</span><span class="n">term</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC242">                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC243">                    <span class="k">for</span> <span class="n">tk</span><span class="p">,</span> <span class="n">tv</span> <span class="ow">in</span> <span class="n">term</span><span class="o">.</span><span class="n">items</span><span class="p">():</span></div><div class="line" id="file-validation-py-LC244">                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tv</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC245">                            <span class="n">opts</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC246">                            <span class="n">opts</span><span class="p">[</span><span class="s">&#39;field&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tv</span></div><div class="line" id="file-validation-py-LC247">                            <span class="n">series_dict</span><span class="p">[</span><span class="n">tk</span><span class="p">]</span> <span class="o">=</span> <span class="n">opts</span></div><div class="line" id="file-validation-py-LC248">                        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tv</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC249">                            <span class="n">opts</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC250">                            <span class="n">opts</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tv</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC251">                            <span class="n">series_dict</span><span class="p">[</span><span class="n">tk</span><span class="p">]</span> <span class="o">=</span> <span class="n">opts</span> </div><div class="line" id="file-validation-py-LC252">                        <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC253">                            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a basestring or &quot;</span></div><div class="line" id="file-validation-py-LC254">                                                <span class="s">&quot;dict in place of: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span><span class="n">tv</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC255">        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">terms</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC256">            <span class="k">for</span> <span class="n">tk</span><span class="p">,</span> <span class="n">tv</span> <span class="ow">in</span> <span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span></div><div class="line" id="file-validation-py-LC257">                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tv</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC258">                    <span class="n">opts</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC259">                    <span class="n">opts</span><span class="p">[</span><span class="s">&#39;field&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tv</span></div><div class="line" id="file-validation-py-LC260">                    <span class="n">series_dict</span><span class="p">[</span><span class="n">tk</span><span class="p">]</span> <span class="o">=</span> <span class="n">opts</span></div><div class="line" id="file-validation-py-LC261">                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tv</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC262">                    <span class="n">opts</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC263">                    <span class="n">opts</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tv</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC264">                    <span class="n">series_dict</span><span class="p">[</span><span class="n">tk</span><span class="p">]</span> <span class="o">=</span> <span class="n">opts</span> </div><div class="line" id="file-validation-py-LC265">                <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC266">                    <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a basestring or dict in &quot;</span></div><div class="line" id="file-validation-py-LC267">                                        <span class="s">&quot;place of: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span><span class="n">tv</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC268">        <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC269">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a list or dict in place of: </span><span class="si">%s</span><span class="s">.&quot;</span> </div><div class="line" id="file-validation-py-LC270">                                <span class="o">%</span><span class="n">terms</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC271">    <span class="k">return</span> <span class="n">series_dict</span></div><div class="line" id="file-validation-py-LC272">&nbsp;</div><div class="line" id="file-validation-py-LC273"><span class="k">def</span> <span class="nf">clean_dps</span><span class="p">(</span><span class="n">series</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC274">    <span class="sd">&quot;&quot;&quot;Clean the DataPool series input from the user.</span></div><div class="line" id="file-validation-py-LC275"><span class="sd">    &quot;&quot;&quot;</span></div><div class="line" id="file-validation-py-LC276">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC277">        <span class="k">if</span> <span class="ow">not</span> <span class="n">series</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC278">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;&#39;series&#39; cannot be empty.&quot;</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC279">        <span class="k">for</span> <span class="n">tk</span><span class="p">,</span> <span class="n">td</span> <span class="ow">in</span> <span class="n">series</span><span class="o">.</span><span class="n">items</span><span class="p">():</span></div><div class="line" id="file-validation-py-LC280">            <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC281">                <span class="n">td</span><span class="p">[</span><span class="s">&#39;source&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_clean_source</span><span class="p">(</span><span class="n">td</span><span class="p">[</span><span class="s">&#39;source&#39;</span><span class="p">])</span></div><div class="line" id="file-validation-py-LC282">            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC283">                <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> is missing the &#39;source&#39; key.&quot;</span> <span class="o">%</span><span class="n">td</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC284">            <span class="n">td</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s">&#39;field&#39;</span><span class="p">,</span> <span class="n">tk</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC285">            <span class="n">fa</span> <span class="o">=</span> <span class="n">_validate_field_lookup_term</span><span class="p">(</span><span class="n">td</span><span class="p">[</span><span class="s">&#39;source&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">td</span><span class="p">[</span><span class="s">&#39;field&#39;</span><span class="p">])</span>\</div><div class="line" id="file-validation-py-LC286">                   <span class="o">.</span><span class="n">title</span><span class="p">()</span></div><div class="line" id="file-validation-py-LC287">            <span class="c"># If the user supplied term is not a field name, use it as an alias</span></div><div class="line" id="file-validation-py-LC288">            <span class="k">if</span> <span class="n">tk</span> <span class="o">!=</span> <span class="n">td</span><span class="p">[</span><span class="s">&#39;field&#39;</span><span class="p">]:</span></div><div class="line" id="file-validation-py-LC289">                <span class="n">fa</span> <span class="o">=</span> <span class="n">tk</span> </div><div class="line" id="file-validation-py-LC290">            <span class="n">td</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s">&#39;field_alias&#39;</span><span class="p">,</span> <span class="n">fa</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC291">    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC292">        <span class="n">series</span> <span class="o">=</span> <span class="n">_convert_dps_to_dict</span><span class="p">(</span><span class="n">series</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC293">        <span class="n">clean_dps</span><span class="p">(</span><span class="n">series</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC294">    <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC295">        <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a dict or list in place of: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span><span class="n">series</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC296">    <span class="k">return</span> <span class="n">series</span></div><div class="line" id="file-validation-py-LC297">&nbsp;</div><div class="line" id="file-validation-py-LC298"><span class="k">def</span> <span class="nf">_convert_pcso_to_dict</span><span class="p">(</span><span class="n">series_options</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC299">    <span class="n">series_options_dict</span> <span class="o">=</span> <span class="p">{}</span></div><div class="line" id="file-validation-py-LC300">    <span class="k">for</span> <span class="n">stod</span> <span class="ow">in</span> <span class="n">series_options</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC301">        <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC302">            <span class="n">options</span> <span class="o">=</span> <span class="n">stod</span><span class="p">[</span><span class="s">&#39;options&#39;</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC303">        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC304">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> is missing the &#39;options&#39; key.&quot;</span> <span class="o">%</span><span class="n">stod</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC305">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC306">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a dict in place of: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span><span class="n">options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC307">        </div><div class="line" id="file-validation-py-LC308">        <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC309">            <span class="n">terms</span> <span class="o">=</span> <span class="n">stod</span><span class="p">[</span><span class="s">&#39;terms&#39;</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC310">        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC311">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> is missing the &#39;terms&#39; key.&quot;</span> <span class="o">%</span><span class="n">stod</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC312">        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">terms</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC313">            <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">terms</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC314">                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC315">                    <span class="n">opts</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC316">                    <span class="n">series_options_dict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">term</span><span class="p">:</span> <span class="n">opts</span><span class="p">})</span></div><div class="line" id="file-validation-py-LC317">                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC318">                    <span class="k">for</span> <span class="n">tk</span><span class="p">,</span> <span class="n">tv</span> <span class="ow">in</span> <span class="n">term</span><span class="o">.</span><span class="n">items</span><span class="p">():</span></div><div class="line" id="file-validation-py-LC319">                        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tv</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC320">                            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a dict in place &quot;</span></div><div class="line" id="file-validation-py-LC321">                                                <span class="s">&quot;of: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span><span class="n">tv</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC322">                        <span class="n">opts</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC323">                        <span class="n">opts</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tv</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC324">                        <span class="n">series_options_dict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">tk</span><span class="p">:</span> <span class="n">opts</span><span class="p">})</span></div><div class="line" id="file-validation-py-LC325">        <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC326">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a list in place of: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span><span class="n">terms</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC327">    <span class="k">return</span> <span class="n">series_options_dict</span></div><div class="line" id="file-validation-py-LC328">&nbsp;</div><div class="line" id="file-validation-py-LC329">&nbsp;</div><div class="line" id="file-validation-py-LC330"><span class="k">def</span> <span class="nf">clean_pcso</span><span class="p">(</span><span class="n">series_options</span><span class="p">,</span> <span class="n">ds</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC331">    <span class="sd">&quot;&quot;&quot;Clean the PivotChart series_options input from the user.</span></div><div class="line" id="file-validation-py-LC332"><span class="sd">    &quot;&quot;&quot;</span></div><div class="line" id="file-validation-py-LC333">    <span class="c">#todlist = term option dict list</span></div><div class="line" id="file-validation-py-LC334">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">series_options</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC335">        <span class="k">for</span> <span class="n">sok</span><span class="p">,</span> <span class="n">sod</span> <span class="ow">in</span> <span class="n">series_options</span><span class="o">.</span><span class="n">items</span><span class="p">():</span></div><div class="line" id="file-validation-py-LC336">            <span class="k">if</span> <span class="n">sok</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span></div><div class="line" id="file-validation-py-LC337">                    <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;All the series terms must be present &quot;</span></div><div class="line" id="file-validation-py-LC338">                                        <span class="s">&quot;in the series dict of the &quot;</span></div><div class="line" id="file-validation-py-LC339">                                        <span class="s">&quot;datasource. Got </span><span class="si">%s</span><span class="s">. Allowed values &quot;</span></div><div class="line" id="file-validation-py-LC340">                                        <span class="s">&quot;are: </span><span class="si">%s</span><span class="s">&quot;</span> </div><div class="line" id="file-validation-py-LC341">                                        <span class="o">%</span><span class="p">(</span><span class="n">sok</span><span class="p">,</span> <span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span></div><div class="line" id="file-validation-py-LC342">            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sod</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC343">                <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;All the series options must be of the &quot;</span></div><div class="line" id="file-validation-py-LC344">                                    <span class="s">&quot;type dict. Got </span><span class="si">%s</span><span class="s"> of type </span><span class="si">%s</span><span class="s"> instead.&quot;</span> </div><div class="line" id="file-validation-py-LC345">                                    <span class="o">%</span><span class="p">(</span><span class="n">sod</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">sod</span><span class="p">)))</span></div><div class="line" id="file-validation-py-LC346">    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">series_options</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC347">        <span class="n">series_options</span> <span class="o">=</span> <span class="n">_convert_pcso_to_dict</span><span class="p">(</span><span class="n">series_options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC348">        <span class="n">clean_pcso</span><span class="p">(</span><span class="n">series_options</span><span class="p">,</span> <span class="n">ds</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC349">    <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC350">        <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a dict or list in place of: </span><span class="si">%s</span><span class="s">.&quot;</span> </div><div class="line" id="file-validation-py-LC351">                            <span class="o">%</span><span class="n">series_options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC352">    <span class="k">return</span> <span class="n">series_options</span></div><div class="line" id="file-validation-py-LC353">&nbsp;</div><div class="line" id="file-validation-py-LC354"><span class="k">def</span> <span class="nf">_convert_cso_to_dict</span><span class="p">(</span><span class="n">series_options</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC355">    <span class="n">series_options_dict</span> <span class="o">=</span> <span class="p">{}</span></div><div class="line" id="file-validation-py-LC356">    <span class="c">#stod: series term and option dict</span></div><div class="line" id="file-validation-py-LC357">    <span class="k">for</span> <span class="n">stod</span> <span class="ow">in</span> <span class="n">series_options</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC358">        <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC359">            <span class="n">options</span> <span class="o">=</span> <span class="n">stod</span><span class="p">[</span><span class="s">&#39;options&#39;</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC360">        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC361">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> is missing the &#39;options&#39; key.&quot;</span> <span class="o">%</span><span class="n">stod</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC362">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC363">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a dict in place of: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span><span class="n">options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC364">        </div><div class="line" id="file-validation-py-LC365">        <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC366">            <span class="n">terms</span> <span class="o">=</span> <span class="n">stod</span><span class="p">[</span><span class="s">&#39;terms&#39;</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC367">        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC368">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> is missing the &#39;terms&#39; key.&quot;</span> <span class="o">%</span><span class="n">stod</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC369">        </div><div class="line" id="file-validation-py-LC370">        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">terms</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC371">            <span class="k">if</span> <span class="ow">not</span> <span class="n">terms</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC372">                <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;&#39;terms&#39; dict cannot be empty.&quot;</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC373">            <span class="k">for</span> <span class="n">tk</span><span class="p">,</span> <span class="n">td</span> <span class="ow">in</span> <span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span></div><div class="line" id="file-validation-py-LC374">                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">td</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC375">                    <span class="k">for</span> <span class="n">yterm</span> <span class="ow">in</span> <span class="n">td</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC376">                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">yterm</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC377">                            <span class="n">opts</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC378">                            <span class="n">opts</span><span class="p">[</span><span class="s">&#39;_x_axis_term&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tk</span></div><div class="line" id="file-validation-py-LC379">                            <span class="n">series_options_dict</span><span class="p">[</span><span class="n">yterm</span><span class="p">]</span> <span class="o">=</span> <span class="n">opts</span></div><div class="line" id="file-validation-py-LC380">                        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">yterm</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC381">                            <span class="n">opts</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC382">                            <span class="n">opts</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">yterm</span><span class="o">.</span><span class="n">values</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span></div><div class="line" id="file-validation-py-LC383">                            <span class="n">opts</span><span class="p">[</span><span class="s">&#39;_x_axis_term&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tk</span></div><div class="line" id="file-validation-py-LC384">                            <span class="n">series_options_dict</span><span class="p">[</span><span class="n">yterm</span><span class="o">.</span><span class="n">keys</span><span class="p">()[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">opts</span></div><div class="line" id="file-validation-py-LC385">                        <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC386">                            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a basestring or &quot;</span></div><div class="line" id="file-validation-py-LC387">                                                <span class="s">&quot;dict in place of: </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span><span class="n">yterm</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC388">                <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC389">                    <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a list instead of: </span><span class="si">%s</span><span class="s">&quot;</span></div><div class="line" id="file-validation-py-LC390">                                        <span class="o">%</span><span class="n">td</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC391">        <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC392">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a dict in place of: </span><span class="si">%s</span><span class="s">.&quot;</span> </div><div class="line" id="file-validation-py-LC393">                                <span class="o">%</span><span class="n">terms</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC394">    <span class="k">return</span> <span class="n">series_options_dict</span></div><div class="line" id="file-validation-py-LC395">                    </div><div class="line" id="file-validation-py-LC396"><span class="k">def</span> <span class="nf">clean_cso</span><span class="p">(</span><span class="n">series_options</span><span class="p">,</span> <span class="n">ds</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC397">    <span class="sd">&quot;&quot;&quot;Clean the Chart series_options input from the user.</span></div><div class="line" id="file-validation-py-LC398"><span class="sd">    &quot;&quot;&quot;</span></div><div class="line" id="file-validation-py-LC399">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">series_options</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC400">        <span class="k">for</span> <span class="n">sok</span><span class="p">,</span> <span class="n">sod</span> <span class="ow">in</span> <span class="n">series_options</span><span class="o">.</span><span class="n">items</span><span class="p">():</span></div><div class="line" id="file-validation-py-LC401">            <span class="k">if</span> <span class="n">sok</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span></div><div class="line" id="file-validation-py-LC402">                    <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> is not one of the keys of the &quot;</span></div><div class="line" id="file-validation-py-LC403">                                        <span class="s">&quot;datasource series. Allowed values &quot;</span></div><div class="line" id="file-validation-py-LC404">                                        <span class="s">&quot;are: </span><span class="si">%s</span><span class="s">&quot;</span> </div><div class="line" id="file-validation-py-LC405">                                        <span class="o">%</span><span class="p">(</span><span class="n">sok</span><span class="p">,</span> <span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span></div><div class="line" id="file-validation-py-LC406">            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sod</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC407">                <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> is of type: </span><span class="si">%s</span><span class="s">. Expecting a dict.&quot;</span> </div><div class="line" id="file-validation-py-LC408">                                    <span class="o">%</span><span class="p">(</span><span class="n">sod</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">sod</span><span class="p">)))</span></div><div class="line" id="file-validation-py-LC409">            <span class="k">try</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC410">                <span class="n">_x_axis_term</span> <span class="o">=</span> <span class="n">sod</span><span class="p">[</span><span class="s">&#39;_x_axis_term&#39;</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC411">                <span class="k">if</span> <span class="n">_x_axis_term</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span></div><div class="line" id="file-validation-py-LC412">                    <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> is not one of the keys of the &quot;</span></div><div class="line" id="file-validation-py-LC413">                                        <span class="s">&quot;datasource series. Allowed values &quot;</span></div><div class="line" id="file-validation-py-LC414">                                        <span class="s">&quot;are: </span><span class="si">%s</span><span class="s">&quot;</span> </div><div class="line" id="file-validation-py-LC415">                                        <span class="o">%</span><span class="p">(</span><span class="n">_x_axis_term</span><span class="p">,</span> </div><div class="line" id="file-validation-py-LC416">                                          <span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span></div><div class="line" id="file-validation-py-LC417">            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC418">                <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;Expecting a &#39;_x_axis_term&#39; for </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span><span class="n">sod</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC419">            <span class="k">if</span> <span class="n">ds</span><span class="o">.</span><span class="n">series</span><span class="p">[</span><span class="n">sok</span><span class="p">][</span><span class="s">&#39;_data&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">ds</span><span class="o">.</span><span class="n">series</span><span class="p">[</span><span class="n">_x_axis_term</span><span class="p">][</span><span class="s">&#39;_data&#39;</span><span class="p">]:</span></div><div class="line" id="file-validation-py-LC420">                <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> and </span><span class="si">%s</span><span class="s"> do not belong to the same &quot;</span></div><div class="line" id="file-validation-py-LC421">                                    <span class="s">&quot;table.&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">sok</span><span class="p">,</span> <span class="n">_x_axis_term</span><span class="p">))</span></div><div class="line" id="file-validation-py-LC422">                <span class="n">sod</span><span class="p">[</span><span class="s">&#39;_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">series</span><span class="p">[</span><span class="n">sok</span><span class="p">][</span><span class="s">&#39;_data&#39;</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC423">    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">series_options</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC424">        <span class="n">series_options</span> <span class="o">=</span> <span class="n">_convert_cso_to_dict</span><span class="p">(</span><span class="n">series_options</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC425">        <span class="n">clean_cso</span><span class="p">(</span><span class="n">series_options</span><span class="p">,</span> <span class="n">ds</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC426">    <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC427">        <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;&#39;series_options&#39; must either be a dict or a &quot;</span></div><div class="line" id="file-validation-py-LC428">                            <span class="s">&quot;list. Got </span><span class="si">%s</span><span class="s"> of type </span><span class="si">%s</span><span class="s"> instead.&quot;</span> </div><div class="line" id="file-validation-py-LC429">                            <span class="o">%</span><span class="p">(</span><span class="n">series_options</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">series_options</span><span class="p">)))</span></div><div class="line" id="file-validation-py-LC430">    <span class="k">return</span> <span class="n">series_options</span></div><div class="line" id="file-validation-py-LC431">&nbsp;</div><div class="line" id="file-validation-py-LC432"><span class="k">def</span> <span class="nf">clean_sortf_mapf_mts</span><span class="p">(</span><span class="n">sortf_mapf_mts</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC433">    <span class="k">if</span> <span class="n">sortf_mapf_mts</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC434">        <span class="n">sortf_mapf_mts</span> <span class="o">=</span> <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC435">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sortf_mapf_mts</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC436">        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sortf_mapf_mts</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC437">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%r</span><span class="s"> must have exactly three elements.&quot;</span></div><div class="line" id="file-validation-py-LC438">                                <span class="o">%</span><span class="n">sortf_mapf_mts</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC439">        <span class="n">sortf</span><span class="p">,</span> <span class="n">mapf</span><span class="p">,</span> <span class="n">mts</span> <span class="o">=</span> <span class="n">sortf_mapf_mts</span></div><div class="line" id="file-validation-py-LC440">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">sortf</span><span class="p">)</span> <span class="ow">and</span> <span class="n">sortf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC441">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%r</span><span class="s"> must be callable or None.&quot;</span> <span class="o">%</span><span class="n">sortf</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC442">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">mapf</span><span class="p">)</span> <span class="ow">and</span> <span class="n">mapf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC443">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%r</span><span class="s"> must be callable or None.&quot;</span> <span class="o">%</span><span class="n">mapf</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC444">        <span class="n">mts</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">mts</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC445">    <span class="k">return</span> <span class="p">(</span><span class="n">sortf</span><span class="p">,</span> <span class="n">mapf</span><span class="p">,</span> <span class="n">mts</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC446">&nbsp;</div><div class="line" id="file-validation-py-LC447"><span class="k">def</span> <span class="nf">clean_x_sortf_mapf_mts</span><span class="p">(</span><span class="n">x_sortf_mapf_mts</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC448">    <span class="n">cleaned_x_s_m_mts</span> <span class="o">=</span> <span class="p">[]</span></div><div class="line" id="file-validation-py-LC449">    <span class="k">if</span> <span class="n">x_sortf_mapf_mts</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC450">        <span class="n">x_sortf_mapf_mts</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">False</span><span class="p">)]</span></div><div class="line" id="file-validation-py-LC451">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x_sortf_mapf_mts</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC452">        <span class="n">x_sortf_mapf_mts</span> <span class="o">=</span> <span class="p">[</span><span class="n">x_sortf_mapf_mts</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC453">    <span class="k">for</span> <span class="n">x_s_m_mts</span> <span class="ow">in</span> <span class="n">x_sortf_mapf_mts</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC454">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x_s_m_mts</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span></div><div class="line" id="file-validation-py-LC455">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%r</span><span class="s"> must be a tuple.&quot;</span> <span class="o">%</span><span class="n">x_s_m_mts</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC456">        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x_s_m_mts</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC457">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%r</span><span class="s"> must have exactly three elements.&quot;</span></div><div class="line" id="file-validation-py-LC458">                                <span class="o">%</span><span class="n">x_s_m_mts</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC459">        <span class="n">x_sortf</span> <span class="o">=</span> <span class="n">x_s_m_mts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC460">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">x_sortf</span><span class="p">)</span> <span class="ow">and</span> <span class="n">x_sortf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC461">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%r</span><span class="s"> must be callable or None.&quot;</span> <span class="o">%</span><span class="n">x_sortf</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC462">        <span class="n">x_mapf</span> <span class="o">=</span> <span class="n">x_s_m_mts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div><div class="line" id="file-validation-py-LC463">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">x_mapf</span><span class="p">)</span> <span class="ow">and</span> <span class="n">x_mapf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span></div><div class="line" id="file-validation-py-LC464">            <span class="k">raise</span> <span class="n">APIInputError</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%r</span><span class="s"> must be callable or None.&quot;</span> <span class="o">%</span><span class="n">x_mapf</span><span class="p">)</span></div><div class="line" id="file-validation-py-LC465">        <span class="n">x_mts</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">x_s_m_mts</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span></div><div class="line" id="file-validation-py-LC466">        <span class="n">cleaned_x_s_m_mts</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x_sortf</span><span class="p">,</span> <span class="n">x_mapf</span><span class="p">,</span> <span class="n">x_mts</span><span class="p">))</span></div><div class="line" id="file-validation-py-LC467">    <span class="k">return</span> <span class="n">cleaned_x_s_m_mts</span></div></pre>
          </td>
        </tr>
      </table>
    </div>

          </div>
        </div>
    <div id="comments" class="new-comments">
      
    </div>
      <p class="uncommentable"><span class="octicon octicon-alert"></span> Please <a href="/login?return_to=/rochacbruno/4536630" rel="nofollow">sign in</a> to comment on this gist.</p>
  </div>
</div>

  <div class="context-overlay"></div>
</div>

    </div>
    <div class="slow-loading-overlay"></div>
  </div>

  <div id="ajax-error-message" class="flash flash-error">
    <div class="container">
      <span class="octicon octicon-alert"></span>
      Something went wrong with that request. Please try again.
      <a href="#" class="octicon octicon-remove-close ajax-error-dismiss"></a>
    </div>
  </div>

  <footer>
    <div id="footer">
  <div class="container clearfix">

    <!-- Served fresh by github-fe102-cp1-prd.iad.github.net -->
    <p class="right">&copy; 2013 GitHub Inc. All rights reserved.</p>
    <a class="left" href="/">
      <span class="mega-octicon octicon-mark-github"></span>
    </a>
    <ul id="legal">
      <li><a href="https://github.com/blog">The GitHub Blog</a></li>
      <li><a href="mailto:support@github.com">Support</a></li>
      <li><a href="https://github.com/contact">Contact</a></li>
    </ul>

  </div><!-- /.container -->
</div><!-- /.#footer -->

  </footer>

</body>
</html>
